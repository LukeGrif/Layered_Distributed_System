<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 
    template="/templates/providerTemplate.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core">

  <ui:define name="content">
    <h2>Job Market (Provider)</h2>
    <h:outputText value="(DEBUG) fetched #{jobBean.providerJobs.size()} jobs"
                  style="color:red"/>

    <!-- CURRENT JOBS: status == 1 -->
    <h2>Current Jobs</h2>
    <h:form id="currentJobsForm">
      <table border="1" style="margin:0 auto; margin-top:20px;">
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Payment</th>
          <th>Status</th>
        </tr>
        <ui:repeat var="job" value="#{jobBean.providerJobs}">
          <ui:fragment rendered="#{job.status == 1}">
            <tr>
              <td>#{job.title}</td>
              <td>#{job.description}</td>
              <td>#{job.paymentOffer}</td>
              <td>#{job.statusLabel}</td>
            </tr>
          </ui:fragment>
        </ui:repeat>
      </table>
    </h:form>

    <!-- IN PROGRESS JOBS: status == 2 -->
    <h2>In Progress Jobs</h2>
    <h:form id="inProgressJobsForm">
      <table border="1" style="margin:0 auto; margin-top:20px;">
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Payment</th>
          <th>Freelancer Name</th>
          <th>Status</th>
        </tr>
        <ui:repeat var="job" value="#{jobBean.providerJobs}">
          <ui:fragment rendered="#{job.status == 2}">
            <tr>
              <td>#{job.title}</td>
              <td>#{job.description}</td>
              <td>#{job.paymentOffer}</td>
              <td>
                #{job.assignedFreelancer != null 
                  ? job.assignedFreelancer.name 
                  : '-'}
              </td>
              <td>#{job.statusLabel}</td>
            </tr>
          </ui:fragment>
        </ui:repeat>
      </table>
    </h:form>

    <!-- COMPLETED JOBS: status == 3 -->
    <h2>Completed Jobs</h2>
    <h:form id="completedJobsForm">
      <table border="1" style="margin:0 auto; margin-top:20px;">
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Payment</th>
          <th>Freelancer Name</th>
          <th>Status</th>
        </tr>
        <ui:repeat var="job" value="#{jobBean.providerJobs}">
          <ui:fragment rendered="#{job.status == 3}">
            <tr>
              <td>#{job.title}</td>
              <td>#{job.description}</td>
              <td>#{job.paymentOffer}</td>
              <td>
                #{job.assignedFreelancer != null 
                  ? job.assignedFreelancer.name 
                  : '-'}
              </td>
              <td>#{job.statusLabel}</td>
            </tr>
          </ui:fragment>
        </ui:repeat>
      </table>
    </h:form>

  </ui:define>
</ui:composition>
